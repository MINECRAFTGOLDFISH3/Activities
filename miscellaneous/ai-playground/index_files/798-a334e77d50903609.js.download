"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[798],{20798:function(e,n,l){l.r(n),l.d(n,{Editor:function(){return k}});var t=l(32084),s=l(97425),a=l(89462),i=l(97392),r=l(49599),o=l(79932),d=l(82350),c=l(76077),u=l(22585),m=l(56780),x=l(98930),h=l(33222),p=l(89784),v=l(7947),f=l.n(v),g=l(18758);let b=f()(()=>l.e(6803).then(l.bind(l,16803)).then(e=>e.LoginToShareModal),{loadableGenerated:{webpack:()=>[16803]},ssr:!1}),j=f()(()=>Promise.resolve().then(l.bind(l,42387)).then(e=>e.UpgradeGateModal),{loadableGenerated:{webpack:()=>[42387]},ssr:!1}),w=f()(()=>l.e(768).then(l.bind(l,20768)).then(e=>e.ExpiredTokenModal),{loadableGenerated:{webpack:()=>[20768]},ssr:!1}),y=f()(()=>Promise.resolve().then(l.bind(l,33829)).then(e=>e.LoginGateModal),{loadableGenerated:{webpack:()=>[33829]},ssr:!1}),N=f()(()=>l.e(5731).then(l.bind(l,75731)).then(e=>e.RateLimitModal),{loadableGenerated:{webpack:()=>[75731]},ssr:!1});function k(e){var n,l,v,f,k;let{session:C,requestCount:S,initialChatData:P,initialPlaygroundId:z,initialShareId:M,playgroundHistory:I,header:L}=e;globalThis.marker="mark";let{data:Z,mutate:E}=(0,x.ZP)("showTokenExpiredModal",null,{fallbackData:!1});(0,p.X)(E);let{data:_,mutate:D}=(0,x.ZP)("showLimitModal",null,{fallbackData:S>(0,d._)({plan:null==C?void 0:null===(n=C.user)||void 0===n?void 0:n.plan,email:null==C?void 0:null===(l=C.user)||void 0===l?void 0:l.email})}),[R,T]=(0,s.useState)(!1),[q,,,F]=(0,o.D)(),G=(0,s.useState)(z||(()=>(0,r.Z)()))[0],A=e=>{var n,l;let t={id:(0,r.Z)(),event_time:new Date().getTime(),action:"button-click",button_name:e,user_id:null==C?void 0:null===(n=C.user)||void 0===n?void 0:n.id,billing_plan:null==C?void 0:null===(l=C.user)||void 0===l?void 0:l.plan,request_id:(0,r.Z)()};(0,c.lA)(c.fe[c.Zf.ClickEvent],c.Zf.ClickEvent,t).catch(()=>null)},{copyToClipboard:O}=(0,m.m)({}),U=(0,i.Z)(["share",G],async()=>{let e=await fetch("/api/share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playgroundId:G})}),n=await e.json();if(!e.ok)throw Error(n.error);return n.shareId},{onError:e=>{"Not authorized"!=e.message&&a.Am.error("Something went wrong.")},onSuccess:e=>{O("".concat(window.location.origin,"/s/").concat(e)),a.Am.success("Shareable link generated and copied to clipboard!")}}),W=null==C?void 0:null===(v=C.user)||void 0===v?void 0:v.id,H=U.data||M,{isLoading:$}=(0,g.R)({id:q[0],api:void 0});return(0,t.jsxs)(u.UI,{session:C,chatIds:q,requestCount:S,initialChatData:P,readonly:!1,chatAvatar:(null==C?void 0:null===(f=C.user)||void 0===f?void 0:f.username)?"https://vercel.com/api/www/avatar/?u=".concat(null==C?void 0:null===(k=C.user)||void 0===k?void 0:k.username,"&s=56"):void 0,playgroundId:G,updateChats:F,playgroundHistory:I,header:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.m,{prefix:"/s",shareId:H,requireLogin:!W,onShare:()=>{U.trigger().catch(()=>{})},sharing:U.isMutating,disabled:$,initialShareId:M}),L]}),children:[(0,t.jsx)(b,{setSignInClicked:T,signInClicked:R}),(0,t.jsx)(j,{streamOnClick:A}),(0,t.jsx)(w,{show:Z,setShowModal:E,nextQuery:"/?s=1",signInClicked:R,setSignInClicked:T}),(0,t.jsx)(y,{setSignInClicked:T,signInClicked:R}),(0,t.jsx)(N,{session:C,showLimitModal:_,setShowLimitModal:D,streamOnClick:A})]})}k.displayName="Playground"},22585:function(e,n,l){l.r(n),l.d(n,{UI:function(){return er}});var t=l(32084),s=l(73100),a=l(97425),i=l(98930);let r=(0,a.createContext)(null),o=e=>{let{children:n}=e,[l]=(0,a.useState)(()=>({id:Math.random(),emitters:new Set}));return(0,a.createElement)(r.Provider,{value:l},n)};var d=l(74796),c=l(31662),u=l(59334),m=l(91521),x=l(6421),h=l(5211);let p=(0,a.forwardRef)(function(e,n){let{header:l,id:s,footer:a,className:i,children:r,overscrollBehavior:o="auto",readonly:d}=e;return(0,t.jsx)("div",{className:(0,c.cn)("h-full w-full overflow-hidden",i),children:(0,t.jsxs)("div",{className:"flex flex-col flex-no-wrap h-full overflow-y-auto",ref:n,children:[l?(0,t.jsx)("div",{className:"sticky top-0 z-10 flex-shrink-0 min-w-0 min-h-0",children:l}):null,(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("div",{id:s,className:(0,c.cn)("scrolling-touch scrolling-gpu h-full w-full relative overflow-auto pb-12",{"overscroll-y-auto":"auto"===o,"overscroll-y-none":"none"===o}),children:r})}),a?(0,t.jsx)("div",{className:"sticky bottom-0 flex-shrink-0 min-w-0 min-h-0",children:a}):null]})})});var v=l(20193),f=l(71567),g=l(74268),b=l(55346),j=l(10191);function w(e){let{className:n,...l}=e;return(0,t.jsx)("button",{className:(0,c.cn)("rounded-md py-0.5 px-3 inline-flex items-center bg-white border text-zinc-600 font-semibold text-sm leading-6 hover:bg-zinc-100 transition-colors ease disabled:opacity-50 disabled:cursor-not-allowed",n),type:"button",...l})}w.displayName="Button";var y=l(58220),N=l(58454),k=l(59803),C=l(12023),S=l(78406),P=l(34671),z=l(56780),M=l(5576),I=l.n(M);let L=(0,a.lazy)(()=>Promise.all([l.e(9596),l.e(1088)]).then(l.bind(l,51088)).then(e=>({default:e.MemoizedReactMarkdown})));function Z(e){var n;let{message:l,modelIcon:s,chatAvatar:i,onSubmit:r,readonly:o}=e,[d,u]=(0,a.useState)(null!==(n=l.content)&&void 0!==n?n:""),[m,x]=(0,a.useState)(!1),{formRef:p,onKeyDown:v}=(0,g.F)(),{isCopied:f,copyToClipboard:j}=(0,z.m)({timeout:2e3});return(0,a.useEffect)(()=>{var e;u(null!==(e=l.content)&&void 0!==e?e:"")},[l.content]),(0,t.jsx)("div",{className:(0,c.cn)("px-3 @md:py-4 py-2.5 group transition-opacity message",{"bg-zinc-100":"user"===l.role,"message-editing":m}),children:(0,t.jsxs)("div",{className:"flex items-start max-w-2xl mx-auto space-x-3",children:["user"===l.role?i?(0,t.jsx)(I(),{className:"w-6 h-6 flex-shrink-0 mt-[2px] rounded-full select-none",src:i,width:24,height:24,alt:"Avatar",priority:!1}):(0,t.jsx)(k.Z,{className:"w-6 h-6 flex-shrink-0 mt-[2px]"}):(0,t.jsx)("div",{className:"w-6 h-6 flex flex-shrink-0 justify-center items-center mt-[2px]",children:s}),m?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("form",{className:"flex-1 w-full text-sm sm:text-base",ref:p,onSubmit:e=>{e.preventDefault(),r(d),x(!1)},children:[(0,t.jsx)(b.Z,{value:d,onKeyDown:v,onChange:e=>u(e.target.value),placeholder:"Send a message",className:(0,c.cn)("flex-1 text-sm sm:text-base w-full leading-7 sm:leading-7 border-0 bg-transparent focus:ring-0 p-0 resize-none"),style:{fontFamily:N.W3},spellCheck:!1,autoFocus:!0}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-2",children:[(0,t.jsx)(h.u,{content:"Save and continue conversation from this point",children:(0,t.jsx)("div",{children:(0,t.jsxs)(w,{type:"submit",className:"gap-1 font-medium shadow-sm cursor-default hover:bg-zinc-50",children:[(0,t.jsx)(C.Z,{className:"w-4 h-4"}),"Save & Submit"]})})}),(0,t.jsx)(w,{type:"button",className:"font-medium shadow-sm cursor-default hover:bg-zinc-50",onClick:()=>{var e;u(null!==(e=l.content)&&void 0!==e?e:""),x(!1)},children:"Cancel"})]})]})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"w-full min-w-0 text-sm sm:text-base",style:{fontFamily:N.W3},children:(0,t.jsx)(L,{className:(0,c.cn)("prose prose-stone prose-sm sm:prose-base prose-pre:rounded-md prose-p:whitespace-pre-wrap prose-p:break-words w-full flex-1 leading-6 prose-p:leading-7 prose-pre:bg-[#282c34] max-w-full"),components:{code(e){let{node:n,inline:l,className:s,children:a,...i}=e;if(a.length){if("▍"==a[0])return(0,t.jsx)("span",{className:"mt-1 cursor-default animate-pulse",children:"▍"});a[0]=a[0].replace("`▍`","▍")}let r=/language-(\w+)/.exec(s||"");if(l)return(0,t.jsx)("code",{className:s,...i,children:a});let o=String(a).replace(/\n$/,"");return(0,t.jsx)(y.ZP,{language:r&&r[1]||"",value:o,...i},Math.random())},table(e){let{children:n}=e;return(0,t.jsx)("table",{className:"px-3 py-1 border border-collapse border-black ",children:n})},th(e){let{children:n}=e;return(0,t.jsx)("th",{className:"px-3 py-1 text-white break-words bg-gray-500 border border-black ",children:n})},td(e){let{children:n}=e;return(0,t.jsx)("td",{className:"px-3 py-1 break-words border border-black",children:n})}},children:l.content})})}),o?null:(0,t.jsxs)("div",{className:"flex items-start mt-[2px]",children:["user"===l.role?(0,t.jsx)(h.u,{content:"Edit this message",children:(0,t.jsx)("div",{className:"",children:(0,t.jsx)("button",{className:"p-1 text-transparent transition-opacity rounded opacity-0 cursor-default group-hover:delay-200 group-hover:opacity-100 text-zinc-400 group-hover:hover:text-zinc-700",onClick:()=>{var e;u(null!==(e=l.content)&&void 0!==e?e:""),x(!0)},disabled:m,"aria-label":"Edit",children:(0,t.jsx)(S.Z,{className:"w-4 h-4"})})})}):null,(0,t.jsx)(h.u,{content:"Copy message to clipboard",children:(0,t.jsx)("div",{className:"",children:(0,t.jsx)("button",{className:"p-1 text-transparent transition-opacity rounded opacity-0 cursor-default group-hover:delay-200 group-hover:opacity-100 text-zinc-400 group-hover:hover:text-zinc-700","aria-label":"Copy",onClick:()=>j(l.content),children:f?(0,t.jsx)(C.Z,{className:"w-4 h-4"}):(0,t.jsx)(P.Z,{className:"w-4 h-4"})})})})]})]})})}Z.displayName="CompletionMessage";var E=l(18758),_=l(49599),D=l(88455),R=l(79932),T=l(44987),q=l(47095),F=l(30745),G=l(45154),A=l(82321),O=l(72929),U=l(60187),W=l(35013),H=l(89462);function $(e){let{className:n}=e;return(0,t.jsx)("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",className:n,children:(0,t.jsxs)("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",children:[(0,t.jsx)("path",{d:"m20 6h-16"}),(0,t.jsx)("path",{d:"m20 12h-16"}),(0,t.jsx)("path",{d:"m12 18h-8"}),(0,t.jsx)("path",{d:"m20 16-4 4"}),(0,t.jsx)("path",{d:"m16 16 4 4"})]})})}var K=l(11891);function B(e){var n,l,s,a,i,r,o,d,u,m,h,p,v,f,g,b,j,w,y,N,k,C,S;let{model:P}=e;return(0,t.jsx)("div",{className:"flex items-start justify-center w-full px-4 mt-24",children:(0,t.jsxs)("div",{className:"w-full max-w-2xl border rounded-lg shadow-xs",children:[(0,t.jsxs)("div",{className:"px-6 pt-5 text-sm bg-white rounded-t-lg",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(x.L,{model:P,className:"w-4 h-4 mr-2"}),(0,t.jsxs)("div",{className:"space-x-1",children:[(0,t.jsx)("span",{className:"text-zinc-600",children:P.makerHumanName}),(0,t.jsx)("span",{className:"text-zinc-400",children:"/"}),(0,t.jsx)("span",{className:"font-medium text-zinc-900",children:P.name})]})]}),(0,t.jsx)("div",{className:"mt-4 text-xs text-zinc-500",children:null===(n=P.info)||void 0===n?void 0:n.description})]}),(0,t.jsxs)("div",{className:"px-6 py-5 text-xs bg-white divide-y",children:[(null===(l=P.info)||void 0===l?void 0:l.contextWindow)?(0,t.jsx)(X,{title:"Context",value:"".concat(null===(s=P.info)||void 0===s?void 0:s.contextWindow.toLocaleString()," tokens")}):null,(null===(i=P.info)||void 0===i?void 0:null===(a=i.pricing)||void 0===a?void 0:a.inputCostPerMil)?(0,t.jsx)(X,{title:"Input Pricing",value:(0,c.T)(null===(o=P.info)||void 0===o?void 0:null===(r=o.pricing)||void 0===r?void 0:r.inputCostPerMil,"usd")+" / million tokens"}):null,(null===(u=P.info)||void 0===u?void 0:null===(d=u.pricing)||void 0===d?void 0:d.price)?(0,t.jsx)(X,{title:"Pricing",value:null===(h=P.info)||void 0===h?void 0:null===(m=h.pricing)||void 0===m?void 0:m.price}):null,(null===(v=P.info)||void 0===v?void 0:null===(p=v.pricing)||void 0===p?void 0:p.outputCostPerMil)?(0,t.jsx)(X,{title:"Output Pricing",value:(0,c.T)(null===(g=P.info)||void 0===g?void 0:null===(f=g.pricing)||void 0===f?void 0:f.outputCostPerMil,"usd")+" / million tokens"}):null]}),(0,t.jsx)("div",{className:"px-6 py-5 text-xs font-medium border-t rounded-b-lg bg-zinc-100/75",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between space-x-4",children:[(0,t.jsxs)("a",{href:null===(b=P.info)||void 0===b?void 0:b.modelUrl,className:"inline-flex items-center text-zinc-500",children:[(0,t.jsx)("span",{children:"Model Page"}),(0,t.jsx)(K.h,{className:"w-3 h-3 ml-1","aria-hidden":"true"})]}),(null===(j=P.info)||void 0===j?void 0:j.datasetUrl)?(0,t.jsxs)("a",{href:null===(w=P.info)||void 0===w?void 0:w.datasetUrl,className:"inline-flex items-center text-zinc-500",children:[(0,t.jsx)("span",{children:"Dataset Page"}),(0,t.jsx)(K.h,{className:"w-3 h-3 ml-1","aria-hidden":"true"})]}):null,(null===(N=P.info)||void 0===N?void 0:null===(y=N.pricing)||void 0===y?void 0:y.pricingUrl)?(0,t.jsxs)("a",{href:null===(C=P.info)||void 0===C?void 0:null===(k=C.pricing)||void 0===k?void 0:k.pricingUrl,className:"inline-flex items-center text-zinc-500",children:[(0,t.jsx)("span",{children:"Pricing"}),(0,t.jsx)(K.h,{className:"w-3 h-3 ml-1","aria-hidden":"true"})]}):null]}),(0,t.jsxs)("a",{href:null===(S=P.info)||void 0===S?void 0:S.website,className:"inline-flex items-center text-zinc-500",children:[(0,t.jsx)("span",{children:"Website"}),(0,t.jsx)(K.h,{className:"w-3 h-3 ml-1","aria-hidden":"true"})]})]})})]})})}function X(e){let{title:n,value:l}=e;return l?(0,t.jsxs)("div",{className:"flex items-start py-3",children:[(0,t.jsx)("div",{className:"font-medium w-28",children:n}),(0,t.jsx)("div",{className:"flex-1 text-zinc-600",children:l})]}):null}B.displayName="ModelCard";var J=l(42387),Y=l(33829),Q=l(98046),V=l(7947),ee=l.n(V);l(68767),l(29798);var en=l(14060);(0,en.$)("379c88af8fd7074a01a3f64128d8cc86d1905f5a"),(0,en.$)("1651e17fea0accdb7c350612ff6e58225aea9e36"),(0,en.$)("b4295d7f43e3d8253ae8cc58e40637a663bddb78");var el=(0,en.$)("86b6e8190ce6d2d2f6e4ecc9b53ef45620dfece3");let et=ee()(()=>Promise.all([l.e(3914),l.e(292)]).then(l.bind(l,50292)).then(e=>e.CodeGeneratorModal),{loadableGenerated:{webpack:()=>[50292]},ssr:!1});function es(e){var n,l,s,o,d,w,y,k;let{id:C,index:S,requestCount:P,modelCount:z,session:M,readonly:I,initialChatData:L,chatAvatar:K,playgroundId:X}=e,[V,ee]=(0,R.R)(C),en=L?{...f.cd[L.model],id:L.model,parameters:function(e,n){let l={...n};for(let n in e)n in l&&(l[n]={...l[n],value:e[n]});return l}(L,f.cd[L.model].parameters),synced:!1}:V,[es,ea,ei]=(0,R.D)(),[er,eo]=(0,D.j)(),ed=(0,F.o)(),[ec,eu]=(0,a.useState)(!1),[em,ex]=(0,a.useState)(!1),{setShowUpgradeGateModal:eh}=(0,J.useUpgradeGateModal)(),{setShowLoginGateModal:ep}=(0,Y.useLoginGateModal)(),{mutate:ev}=(0,i.ZP)("showTokenExpiredModal",null),{mutate:ef}=(0,i.ZP)("showLimitModal",null),{data:eg,mutate:eb}=(0,i.ZP)("reqAmount",null,{fallbackData:P}),ej=(0,m.usePathname)(),ew=(0,a.useRef)(null),{formRef:ey,onKeyDown:eN}=(0,g.F)(),ek=es.length<8,eC=0===S,{messages:eS,append:eP,reload:ez,isLoading:eM,input:eI,setInput:eL,setMessages:eZ,stop:eE}=(0,E.R)({id:C,api:"/api/generate",headers:{"Content-Type":"application/json","Custom-Encoding":er},body:en?{playgroundId:X,chatIndex:S,model:en.id,temperature:null===(n=en.parameters.temperature)||void 0===n?void 0:n.value,maxTokens:en.parameters.maximumLength.value,topK:null===(l=en.parameters.topK)||void 0===l?void 0:l.value,topP:null===(s=en.parameters.topP)||void 0===s?void 0:s.value,frequencyPenalty:null===(o=en.parameters.frequencyPenalty)||void 0===o?void 0:o.value,presencePenalty:null===(d=en.parameters.presencePenalty)||void 0===d?void 0:d.value,stopSequences:null===(w=en.parameters.stopSequences)||void 0===w?void 0:w.value,typicalP:null===(y=en.parameters.typicalP)||void 0===y?void 0:y.value,repetitionPenalty:null===(k=en.parameters.repetitionPenalty)||void 0===k?void 0:k.value}:{},async onResponse(e){let n=eg||0;if(401===e.status){ev(!0),v.ZP.track("Token Expired Modal",{isLoggedIn:!!M,...M?{userId:null==M?void 0:M.user.id,name:null==M?void 0:M.user.name}:{},reqAmount:n});return}if(429===e.status){ef(!0),v.ZP.track("Rate Limit Reached",{isLoggedIn:!!M,...M?{userId:null==M?void 0:M.user.id,name:null==M?void 0:M.user.name}:{},reqAmount:n});return}if(504===e.status){H.ZP.error("The LLM provider took too long to respond");return}if(402===e.status){(null==M?void 0:M.user)?"hobby"===M.user.plan&&eh(!0):ep(!0);return}e.ok||eo();let l=e.headers.get("X-Req-Amount"),t=e.headers.get("X-Req-Limit");l&&t&&(n=Math.max(n,parseInt(l,10))),eb(n),(null==M?void 0:M.user)&&X&&eC&&await el(X,"/"===ej)},onFinish:async()=>{eo()},onError:e=>{"Not authorized"!=e.message&&"Rate limit exceeded"!==e.message&&"Upgrade to pro"!==e.message&&"Login or signup"!==e.message&&"Missing model"!==e.message&&H.ZP.error("Something went wrong.")},initialMessages:null==L?void 0:L.messages}),e_=function(e){let{setMessages:n,append:l,reload:t,enabled:s}=e,o=(0,a.useContext)(r);if(!o)throw Error("useSyncedMessages must be used within <SyncedMessagesProvider>");let{data:d,mutate:c}=(0,i.ZP)(["synced-input",o.id],null,{fallbackData:""}),u=(0,a.useRef)(s);(0,a.useEffect)(()=>{u.current=s},[s]),(0,a.useEffect)(()=>{let e=(e,s)=>{if("sync"===e&&u.current){if(s.length>0){let e=s[s.length-1];"user"===e.role?(n(s.slice(0,-1)),l(e)):(n(s),t())}else n(s)}};return o.emitters.add(e),()=>{o.emitters.delete(e)}},[o.emitters]);let m=(0,a.useCallback)(e=>{o.emitters.forEach(n=>{n("sync",e)})},[o.emitters]);return{syncMessages:m,input:d,setInput:c}}({append:eP,setMessages:eZ,reload:ez,enabled:null==en?void 0:en.synced}),eD=(0,a.useRef)(null);!function(e,n,l){let[t,s]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let s=e.current;if(s&&l&&n&&!t){var a;s.scrollTo({top:null===(a=e.current)||void 0===a?void 0:a.scrollHeight,behavior:"smooth"})}},[n,e,l,t]),(0,a.useEffect)(()=>{let n=()=>{},l=()=>{let l=e.current,t=e=>{s(e.deltaY<0)};null==l||l.addEventListener("wheel",t,{passive:!0}),n=()=>{null==l||l.removeEventListener("wheel",t)}};if(e.current)l();else{let n=setInterval(()=>{e.current&&(clearInterval(n),l())},100)}return n},[e])}(eD,eS,eM);let eR=(0,a.useRef)(null);if((0,a.useEffect)(()=>{let e=e=>{if("/"===e.key&&document.activeElement!==ew.current){var n;e.preventDefault(),null===(n=ew.current)||void 0===n||n.focus()}},n=eR.current;return null==n||n.addEventListener("keydown",e),()=>{null==n||n.removeEventListener("keydown",e)}},[eR]),!en)return null;let eT={...en,loading:eM,messages:[eS[0]||{role:"user",content:"Hello"}]},eq=(0,t.jsx)(x.L,{model:en,className:"w-5 h-5"}),eF=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{readonly:I,id:C,overscrollBehavior:"auto",ref:eD,header:(0,t.jsxs)("div",{className:"flex items-center bg-white/80 backdrop-blur shadow-[0_1px_rgba(202,206,214,.3),0_5px_10px_-5px_rgba(0,0,0,.05)] justify-between py-3 pl-3 pr-2",children:[I?null:(0,t.jsxs)("div",{onPointerDown:e=>{z>1&&ed.start(e)},className:(0,c.cn)("group inline-flex select-none -ml-2 p-1 text-zinc-500 touch-none",z<=1?"opacity-40 cursor-not-allowed":"cursor-grab active:cursor-grabbing active:text-zinc-800"),children:[(0,t.jsx)(q.Z,{className:"w-4 h-4"}),(0,t.jsx)(q.Z,{className:"w-4 h-4 -ml-3"})]}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)(G.q,{value:en.id,disabled:I,onValueChange:e=>{var n;I||(eE(),eZ([]),ee(n=>({...f.cd[e],synced:n.synced})),null===(n=ew.current)||void 0===n||n.focus())}})}),(0,t.jsxs)("div",{className:"flex items-center ml-1",children:[I?null:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.u,{content:"Clear conversation",children:(0,t.jsx)("button",{type:"button",disabled:eM||0===eS.length,className:"block p-1 text-sm font-semibold rounded-md cursor-default text-zinc-500 sm:leading-6 hover:bg-zinc-100 hover:text-zinc-900 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>{eZ([]),eE()},children:(0,t.jsx)($,{className:"w-5 h-5"})})}),(0,t.jsx)(O.Z,{disabled:eM||z<=1,onClick:()=>{eE(),ei(C)}}),(0,t.jsx)(A.D,{onClick:()=>ea("openai:gpt-3.5-turbo"),canAddNewChat:ek,isLoading:eM})]}),(0,t.jsx)(U.L,{onClick:()=>{ex(!0),v.ZP.track("Generate Code Opened",{isLoggedIn:!!M,type:"chat"})}}),(0,t.jsx)(W.n,{content:(0,t.jsx)(T.JC,{readonly:I,fallbackModel:en,id:C}),isOpen:ec,setIsOpen:eu,readonly:I})]})]}),footer:I?null:(0,t.jsx)("div",{className:"p-3 pr-2.5 bg-white/70 backdrop-blur shadow-[0_-1px_rgba(229,231,235,.53),0_5px_20px_-5px_rgba(0,0,0,.24)]",onClick:e=>{ew.current&&e.target===e.currentTarget&&ew.current.focus()},children:(0,t.jsxs)("form",{ref:ey,onSubmit:e=>{if(e.preventDefault(),eM)return eE();if((0,Q.y)(en,M))return;let n=en.synced?e_.input:eI;if(!n.trim())return;let l={role:"user",content:n,id:(0,_.Z)()};en.synced?(e_.syncMessages([...eS,l]),e_.setInput("")):(eP(l),eL(""))},className:"relative flex items-center max-w-2xl mx-auto",children:[(0,t.jsx)(b.Z,{ref:ew,value:en.synced?e_.input:eI,onKeyDown:eN,onChange:e=>en.synced?e_.setInput(e.target.value):eL(e.target.value),placeholder:"Send a message",className:(0,c.cn)("rounded-md flex-1 sm:text-sm text-base bg-zinc-200/50 border border-zinc-200/80 resize-none scroll-m-2 h-[38px] transition-colors focus:border-zinc-400 focus:ring-0 focus:outline-none pb-12"),style:{fontFamily:N.W3},spellCheck:!1,autoFocus:eC}),(0,t.jsxs)("div",{className:"absolute right-2 bottom-2 inline-flex gap-1 @sm:gap-2 items-center justify-end",children:[(0,t.jsx)(h.u,{content:"Sync chat messages with other models",children:(0,t.jsxs)("label",{className:"inline-flex items-center justify-center gap-1.5 py-1.5 px-2",children:[(0,t.jsx)("input",{type:"checkbox",className:"rounded w-3.5 h-3.5 text-zinc-900",checked:en.synced,onChange:e=>{e.target.checked||eL(e_.input),ee({...en,synced:e.target.checked})}}),(0,t.jsx)("span",{className:"text-xs font-medium select-none text-zinc-600 whitespace-nowrap",children:"Sync Chats"})]})}),(0,t.jsx)(j.M,{onStop:eE,loading:eM,disabled:!eM&&(en.synced?0===e_.input.length:0===eI.length),onClick:()=>{var e;v.ZP.track("generate text clicked",{type:"chat",model:en.id,userId:(null==M?void 0:null===(e=M.user)||void 0===e?void 0:e.id)||"anonymous"})}})]})]})}),children:(0,t.jsxs)("div",{className:"divide-y",children:[!eS.length&&eM?(0,t.jsx)("span",{className:"text-zinc-500",children:"Loading..."}):null,eS&&eS.length>0?eS.map((e,n)=>(0,t.jsx)(Z,{readonly:I,messageIndex:n,modelIcon:eq,chatAvatar:K,message:e,onSubmit:l=>{if(I)return;let t={id:(0,_.Z)(),role:e.role,content:l};en.synced?e_.syncMessages([...eS.slice(0,n),t]):(eZ([...eS.slice(0,n),t]),ez())}},"message-".concat(n,"-").concat(e.role,"-").concat(en.id))):(0,t.jsx)(B,{model:en})]})}),(0,t.jsx)(et,{isOpen:em,setIsOpen:ex,model:eT,chatOrCompletion:"chat"})]});return I?(0,t.jsx)("div",{className:"@container min-w-[280px] min-h-[250px] bg-zinc-50 shadow-md w-full h-full",children:eF}):(0,t.jsx)(u.t.Item,{as:"div",value:C,layout:"position",dragTransition:{bounceStiffness:600},dragListener:!1,dragControls:ed,onDragEnd:()=>{setTimeout(()=>{eR.current&&(eR.current.style.transform="none")},0)},transition:{type:"spring",mass:.2},style:{boxShadow:"0 0 6px -1px rgb(0 0 0 / 0.1), 0 0 4px -2px rgb(0 0 0 / 0.1)"},whileDrag:{boxShadow:"0 0 12px -4px rgb(0 0 0 / 0.15), 0 0 8px -2px rgb(0 0 0 / 0.15)"},className:"@container min-w-[280px] min-h-[250px] bg-zinc-50 w-full h-full",ref:eR,tabIndex:0,children:eF})}function ea(){return(0,t.jsx)("div",{className:"w-full bg-zinc-50",children:(0,t.jsx)("div",{className:"flex w-full h-14 items-center bg-white/80 backdrop-blur shadow-[0_1px_rgba(202,206,214,.3),0_5px_10px_-5px_rgba(0,0,0,.05)] justify-between py-3 pl-3 pr-2"})})}es.displayName="Completion";var ei=l(31916);function er(e){let{session:n,header:l,chatIds:a,requestCount:i,initialChatData:r,chatAvatar:x,readonly:h,playgroundId:p,updateChats:v,playgroundHistory:f,children:g}=e,b=(0,d.d)();(0,m.useRouter)();let j=a.length?a.map((e,l)=>{var s;return(0,t.jsx)(es,{id:e,index:l,requestCount:i,session:n,readonly:h,playgroundId:p,modelCount:a.length,initialChatData:null==r?void 0:null===(s=r[l])||void 0===s?void 0:s.data,chatAvatar:x},e)}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ea,{})});return(0,t.jsxs)("div",{className:"flex-1 min-h-[calc(100svh-54px)] h-full flex flex-col",children:[(0,t.jsx)("div",{className:"flex flex-1 h-full lg:justify-between",children:(0,t.jsxs)("div",{className:"flex flex-col items-center w-full h-full",children:[(0,t.jsx)(s.Header,{session:n,children:l}),(0,t.jsx)(o,{children:v?(0,t.jsxs)(u.t.Group,{axis:b?"y":"x",values:a,onReorder:v,as:"div",className:(0,c.cn)(a.length>2?"overflow-x-hidden md:overflow-x-auto force-scrollbar":null,"flex flex-col md:flex-row h-full w-full overflow-y-auto md:overflow-y-hidden bg-zinc-100"),layout:!0,layoutScroll:!0,children:[(0,t.jsx)(ei.Y,{session:n,playgroundHistory:f}),j]}):(0,t.jsx)("div",{className:(0,c.cn)(a.length>2?"overflow-x-hidden md:overflow-x-auto force-scrollbar":null,"flex flex-col md:flex-row h-full w-full overflow-y-auto md:overflow-y-hidden bg-zinc-100"),children:j})})]})}),g]})}}}]);